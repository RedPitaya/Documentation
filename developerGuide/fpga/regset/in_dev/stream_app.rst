.. _fpga_stream_app_dev:

#########################
Stream App FPGA Project
#########################

**FPGA Project:** :ref:`stream_app <fpga_projects>`

**Compatible Boards:**

    * STEMlab 125-10
    * STEMlab 125-14
    * STEMlab 125-14 Z7020
    * SDRlab 122-16
    * STEMlab 125-14 Gen 2
    * STEMlab 125-14 PRO Gen 2
    * STEMlab 125-14 PRO Z7020 Gen 2
    * STEMlab 125-14 TI
    * STEMlab 65-16 TI

**Compatible applications:**

    * :ref:`Data stream control <streaming_top>`

The Stream App FPGA project provides high-speed data streaming capabilities for ADC, DAC, and GPIO interfaces. It enables continuous data 
streaming with configurable triggering, decimation, filtering, and DMA-based data transfer for real-time signal processing applications.

.. contents:: Register index
    :local:
    :depth: 1
    :backlinks: top

|

====================
Memory Map Overview
====================

.. tabularcolumns:: |p{15mm}|p{22mm}|p{22mm}|p{55mm}|

+--------+-------------+------------+------------------------------------------+
|        | Start       | End        | Module Name                              |
+========+=============+============+==========================================+
| CS[0]  | 0x40000000  | 0x400FFFFF | ADC streaming (IN)                       |
+--------+-------------+------------+------------------------------------------+
| CS[1]  | 0x40100000  | 0x401FFFFF | DAC streaming (OUT)                      |
+--------+-------------+------------+------------------------------------------+
| CS[2]  | 0x40200000  | 0x402FFFFF | GPIO streaming (IN/OUT)                  |
+--------+-------------+------------+------------------------------------------+

|

===========================================================
CS[0] - ADC Streaming (0x40000000-0x400FFFFF)
===========================================================

The ADC Streaming module provides real-time data acquisition with DMA support, triggering, decimation, and filtering capabilities.


Quick Reference
---------------

.. tabularcolumns:: |p{20mm}|p{95mm}|p{15mm}|

+------------------+----------------------------------------------------------+-------+
| Offset           | Register                                                 | R/W   |
+==================+==========================================================+=======+
| 0x0-0x8          | Event control (status, select, trigger mask)             | R/W   |
+------------------+----------------------------------------------------------+-------+
| 0x10-0x28        | Trigger configuration (pre/post samples, levels, edge)   | R/W   |
+------------------+----------------------------------------------------------+-------+
| 0x30-0x44        | Data processing (decimation, averaging, filter, 8-bit)   | R/W   |
+------------------+----------------------------------------------------------+-------+
| 0x50-0x70        | DMA configuration (control, status, buffers)             | R/W   |
+------------------+----------------------------------------------------------+-------+
| 0x74-0x80        | Calibration (offset and gain for CH1/CH2)                | R/W   |
+------------------+----------------------------------------------------------+-------+
| 0x9C-0xA8        | Lost samples counters and diagnostics                    | R     |
+------------------+----------------------------------------------------------+-------+
| 0xC0-0xDC        | Equalization filter coefficients (CH1/CH2)               | W     |
+------------------+----------------------------------------------------------+-------+
| 0x100            | Board status (clock, mode)                               | R     |
+------------------+----------------------------------------------------------+-------+

|

Event Control
-------------

.. tabularcolumns:: |p{15mm}|p{105mm}|p{15mm}|p{15mm}|

+--------------------+--------------------------------------------------------------+-------+-----+
| Offset             | Description                                                  | Bits  | R/W |
+====================+==============================================================+=======+=====+
| **0x0**            | **Event status register**                                    |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:4  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Trigger event                                                |    3  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Stop event                                                   |    2  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Start event                                                  |    1  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reset event                                                  |    0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x4**            | **Event select register**                                    |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:5  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Logic analyzer event                                         |    4  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Scope CH2 event                                              |    3  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Scope CH1 event                                              |    2  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Signal generator CH2 event                                   |    1  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Signal generator CH1 event                                   |    0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+


Trigger Configuration
---------------------

.. tabularcolumns:: |p{15mm}|p{105mm}|p{15mm}|p{15mm}|

+--------------------+--------------------------------------------------------------+-------+-----+
| Offset             | Description                                                  | Bits  | R/W |
+====================+==============================================================+=======+=====+
| **0x8**            | **Trigger mask**                                             |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:6  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | External board trigger                                       |    5  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Logic analyzer trigger                                       |    4  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Scope CH2 trigger                                            |    3  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Scope CH1 trigger                                            |    2  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Signal generator CH2 trigger                                 |    1  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Signal generator CH1 trigger                                 |    0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x10**           | **Trigger pre samples**                                      |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Number of pre-trigger samples                                | 31:0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x14**           | **Trigger post samples**                                     |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Number of post-trigger samples                               | 31:0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x18**           | **Trigger pre counter**                                      |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Actual count of pre-trigger samples                          | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x1C**           | **Trigger post counter**                                     |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Actual count of post-trigger samples                         | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x20**           | **Trigger low level**                                        |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:16 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Low trigger level                                            | 15:0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x24**           | **Trigger high level**                                       |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:16 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | High trigger level                                           | 15:0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x28**           | **Trigger edge**                                             |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:1  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Trigger edge:                                                |    0  |   W |
|                    |  * 0 - Rising edge                                           |       |     |
|                    |  * 1 - Falling edge                                          |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+

|

Data Processing
---------------

.. tabularcolumns:: |p{15mm}|p{105mm}|p{15mm}|p{15mm}|

+--------------------+--------------------------------------------------------------+-------+-----+
| Offset             | Description                                                  | Bits  | R/W |
+====================+==============================================================+=======+=====+
| **0x30**           | **Decimation factor**                                        |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:17 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Decimation factor                                            | 16:0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x34**           | **Decimation right shift**                                   |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:4  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Decimation right shift                                       |  3:0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x38**           | **Averaging enable**                                         |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:1  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Averaging enable:                                            |    0  |   W |
|                    |  * 0 - Disabled                                              |       |     |
|                    |  * 1 - Enabled                                               |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x3C**           | **Filter bypass**                                            |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:1  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Filter bypass:                                               |    0  |   W |
|                    |  * 0 - Disabled                                              |       |     |
|                    |  * 1 - Enabled                                               |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x40**           | **Digital loopback**                                         |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:21 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Use ramp signal ADC CH4                                      |    20 | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 19:17 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Use ramp signal ADC CH3                                      |    16 | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 15:13 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Use ramp signal ADC CH2                                      |    12 | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 11:9  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Use ramp signal ADC CH1                                      |    8  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | ADC CH2                                                      |  7:6  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Loopback DAC CH2                                             |    5  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Loopback GPIO N                                              |    4  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | ADC CH1                                                      |  3:2  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Loopback DAC CH1                                             |    1  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Loopback GPIO P                                              |    0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x44**           | **Resolution select**                                        |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:1  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Resolution select:                                           |    0  |   W |
|                    |  * 0 - 16 bit resolution                                     |       |     |
|                    |  * 1 - 8 bit resolution                                      |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+



DMA Configuration
-----------------

.. tabularcolumns:: |p{15mm}|p{105mm}|p{15mm}|p{15mm}|

+--------------------+--------------------------------------------------------------+-------+-----+
| Offset             | Description                                                  | Bits  | R/W |
+====================+==============================================================+=======+=====+
| **0x50**           | **DMA control register**                                     |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:10 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Streaming DMA mode                                           |    9  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Normal DMA mode                                              |    8  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     |  7:5  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reset buffers and flags                                      |    4  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 2 acknowledge                                         |    3  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 1 acknowledge                                         |    2  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Interrupt acknowledge                                        |    1  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Start DMA                                                    |    0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x54**           | **DMA status register**                                      |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:4  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 2 overflow                                            |    3  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 1 overflow                                            |    2  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 2 full                                                |    1  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 1 full                                                |    0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x58**           | **DMA buffer size**                                          |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | DMA buffer size                                              | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x64**           | **DMA destination address CH1 - buffer 1**                   |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | DMA destination address - buffer 1                           | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x68**           | **DMA destination address CH1 - buffer 2**                   |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | DMA destination address - buffer 2                           | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x6C**           | **DMA destination address CH2 - buffer 1**                   |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | DMA destination address - buffer 1                           | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x70**           | **DMA destination address CH2 - buffer 2**                   |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | DMA destination address - buffer 2                           | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+


Calibration
-----------

.. tabularcolumns:: |p{15mm}|p{105mm}|p{15mm}|p{15mm}|

+--------------------+--------------------------------------------------------------+-------+-----+
| Offset             | Description                                                  | Bits  | R/W |
+====================+==============================================================+=======+=====+
| **0x74**           | **Calibration offset value CH1**                             |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:16 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Calibration offset value CH1                                 | 15:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x78**           | **Calibration gain value CH1**                               |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:16 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Calibration gain value CH1                                   | 15:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x7C**           | **Calibration offset value CH2**                             |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:16 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Calibration offset value CH2                                 | 15:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x80**           | **Calibration gain value CH2**                               |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:16 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Calibration gain value CH2                                   | 15:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+


Status and Diagnostics
------------------------

.. tabularcolumns:: |p{15mm}|p{105mm}|p{15mm}|p{15mm}|

+--------------------+--------------------------------------------------------------+-------+-----+
| Offset             | Description                                                  | Bits  | R/W |
+====================+==============================================================+=======+=====+
| **0x5C**           | **Number of lost samples CH1 - buffer 1**                    |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Counter of lost samples - buffer 1                           | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x60**           | **Number of lost samples CH1 - buffer 2**                    |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Counter of lost samples - buffer 2                           | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x9C**           | **Number of lost samples CH2 - buffer 1**                    |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Counter of lost samples - buffer 1                           | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xA0**           | **Number of lost samples CH2 - buffer 2**                    |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Counter of lost samples - buffer 2                           | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xA4**           | **Diagnostics - current write pointer CH1**                  |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Write pointer                                                | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xA8**           | **Diagnostics - current write pointer CH2**                  |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Write pointer                                                | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+


Equalization Filters
--------------------

.. tabularcolumns:: |p{15mm}|p{105mm}|p{15mm}|p{15mm}|

+--------------------+--------------------------------------------------------------+-------+-----+
| Offset             | Description                                                  | Bits  | R/W |
+====================+==============================================================+=======+=====+
| **0xC0**           | **Filter coefficient AA - CH1**                              |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:18 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | AA coefficient                                               | 17:0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xC4**           | **Filter coefficient BB - CH1**                              |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:24 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | BB coefficient                                               | 23:0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xC8**           | **Filter coefficient KK - CH1**                              |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:24 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | KK coefficient                                               | 23:0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xCC**           | **Filter coefficient PP - CH1**                              |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | PP coefficient                                               | 23:0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xD0**           | **Filter coefficient AA - CH2**                              |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:18 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | AA coefficient                                               | 17:0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xD4**           | **Filter coefficient BB - CH2**                              |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:24 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | BB coefficient                                               | 23:0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xD8**           | **Filter coefficient KK - CH2**                              |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:24 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | KK coefficient                                               | 23:0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xDC**           | **Filter coefficient PP - CH2**                              |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | PP coefficient                                               | 23:0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+

|

Board Status
------------

.. tabularcolumns:: |p{15mm}|p{105mm}|p{15mm}|p{15mm}|

+--------------------+--------------------------------------------------------------+-------+-----+
| Offset             | Description                                                  | Bits  | R/W |
+====================+==============================================================+=======+=====+
| **0x100**          | **Board status**                                             |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:2  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Board mode:                                                  |    1  | R   |
|                    |  * 1 - Slave                                                 |       |     |
|                    |  * 0 - Master                                                |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Shows presence of clock on SATA connector.                   |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Bit 0 must be set for this value to be valid.                |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | ADC clock is present, PLL locked                             |    0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+

|

:ref:`Back to top <fpga_stream_app_dev>`

|

===========================================================
CS[1] - DAC Streaming (0x40100000-0x401FFFFF)
===========================================================

The DAC Streaming module provides real-time signal generation with DMA support, amplitude control, and event synchronization.


Quick Reference
---------------

.. tabularcolumns:: |p{20mm}|p{95mm}|p{15mm}|

+------------------+----------------------------------------------------------+-------+
| Offset           | Register                                                 | R/W   |
+==================+==========================================================+=======+
| 0x0-0x18         | DAC channel configuration (mode, amplitude, pointers)    | R/W   |
+------------------+----------------------------------------------------------+-------+
| 0x1C-0x24        | Event control (status, select, trigger mask)             | R/W   |
+------------------+----------------------------------------------------------+-------+
| 0x28-0x44        | DMA configuration (control, status, buffers)             | R/W   |
+------------------+----------------------------------------------------------+-------+
| 0x48-0x58        | Error counters and control                               | R/W   |
+------------------+----------------------------------------------------------+-------+
| 0x5C-0x64        | Digital loopback and bitshift control                    | R/W   |
+------------------+----------------------------------------------------------+-------+

|

DAC Channel Configuration
-------------------------

.. tabularcolumns:: |p{15mm}|p{105mm}|p{15mm}|p{15mm}|

+--------------------+--------------------------------------------------------------+-------+-----+
| Offset             | Description                                                  | Bits  | R/W |
+====================+==============================================================+=======+=====+
| **0x0**            | **Configuration**                                            |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:24 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | CH B set output to 0                                         |    23 | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | CH B use 8 bit mode                                          |    22 | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 21:20 | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | CH B trigger selector (don't change when SM is active):      | 19:16 | R/W |
|                    | * 1 - Trig immediately                                       |       |     |
|                    | * 2 - External trigger positive edge - DIO0_P pin            |       |     |
|                    | * 3 - External trigger negative edge                         |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 15:8  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | CH A set output to 0                                         |    7  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | CH A use 8 bit mode                                          |    6  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     |  5:4  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | CH A trigger selector (don't change when SM is active):      |  3:0  | R/W |
|                    | * 1 - Trig immediately                                       |       |     |
|                    | * 2 - External trigger positive edge - DIO0_P pin            |       |     |
|                    | * 3 - External trigger negative edge                         |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x4**            | **CH A amplitude scale and offset**                          |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | out = (data*scale)/0x2000 + offset                           |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:30 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Amplitude offset                                             | 29:16 | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 15:14 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Amplitude scale. Unsigned                                    | 13:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | 0x2000 == multiply by 1                                      |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x8**            | **CH A counter step**                                        |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Counter step (16 bits for decimals).                         | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xC**            | **CH A buffer current read pointer**                         |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Read pointer                                                 | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x10**           | **CH B amplitude scale and offset**                          |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | out = (data*scale)/0x2000 + offset                           |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:30 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Amplitude offset                                             | 29:16 | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 15:14 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Amplitude scale. Unsigned                                    | 13:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | 0x2000 == multiply by 1                                      |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x14**           | **CH B counter step**                                        |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Counter step (16 bits for decimals).                         | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x18**           | **CH B buffer current read pointer**                         |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Read pointer                                                 | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+


Event Control
---------------

.. tabularcolumns:: |p{15mm}|p{105mm}|p{15mm}|p{15mm}|

+--------------------+--------------------------------------------------------------+-------+-----+
| Offset             | Description                                                  | Bits  | R/W |
+====================+==============================================================+=======+=====+
| **0x1C**           | **Event status register**                                    |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:4  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Trigger event                                                |    3  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Stop event                                                   |    2  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Start event                                                  |    1  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reset event                                                  |    0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x20**           | **Event select register**                                    |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:5  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Logic analyzer event                                         |    4  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Scope CHB event                                              |    3  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Scope CHA event                                              |    2  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Signal generator CHB event                                   |    1  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Signal generator CHA event                                   |    0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x24**           | **Trigger mask**                                             |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:5  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Logic analyzer trigger                                       |    4  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Scope CH B trigger                                           |    3  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Scope CH A trigger                                           |    2  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Signal generator CH B trigger                                |    1  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Signal generator CH A trigger                                |    0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+


DMA Configuration
-----------------

.. tabularcolumns:: |p{15mm}|p{105mm}|p{15mm}|p{15mm}|

+--------------------+--------------------------------------------------------------+-------+-----+
| Offset             | Description                                                  | Bits  | R/W |
+====================+==============================================================+=======+=====+
| **0x28**           | **DMA control register**                                     |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:14 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 2 ready CHB                                           |    15 |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 1 ready CHB                                           |    14 |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Streaming DMA mode CHB                                       |    13 |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Normal DMA mode CHB                                          |    12 |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 11:10 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reset buffers and flags CHB                                  |    9  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Start DMA CHB                                                |    8  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 2 ready CHA                                           |    7  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 1 ready CHA                                           |    6  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Streaming DMA mode CHA                                       |    5  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Normal DMA mode CHA                                          |    4  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     |  3:2  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reset buffers and flags CHA                                  |    1  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Start DMA CHA                                                |    0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x2C**           | **DMA status register**                                      |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:25 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 2 may be written to                                   |   24  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 1 may be written to                                   |   23  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Active read of buffer 2 state                                |   22  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Active read of buffer 1 state                                |   21  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reset state                                                  |   20  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Wait for buffer 2 to fill up                                 |   19  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Wait for receive FIFO to empty out buffer 2                  |   18  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Wait for buffer 1 to fill up                                 |   17  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Wait for receive FIFO to empty out buffer 1                  |   16  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 15:9  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 2 may be written to                                   |    8  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 1 may be written to                                   |    7  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Active read of buffer 2 state                                |    6  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Active read of buffer 1 state                                |    5  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reset state                                                  |    4  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Wait for buffer 2 to fill up                                 |    3  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Wait for receive FIFO to empty out buffer 2                  |    2  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Wait for buffer 1 to fill up                                 |    1  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Wait for receive FIFO to empty out buffer 1                  |    0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x34**           | **DMA buffer size**                                          |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | DMA buffer size                                              | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x38**           | **DMA buffer 1 address CH A**                                |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | DMA buffer address                                           | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x3C**           | **DMA buffer 2 address CH A**                                |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | DMA buffer address                                           | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x40**           | **DMA buffer 1 address CH B**                                |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | DMA buffer address                                           | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x44**           | **DMA buffer 2 address CH B**                                |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | DMA buffer address                                           | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+


Error Counters
--------------

.. tabularcolumns:: |p{15mm}|p{105mm}|p{15mm}|p{15mm}|

+--------------------+--------------------------------------------------------------+-------+-----+
| Offset             | Description                                                  | Bits  | R/W |
+====================+==============================================================+=======+=====+
| **0x48**           | **Error counter expected step CHA**                          |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:16 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Counter step (due to decimation)                             | 15:0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x4C**           | **Error counter expected step CHB**                          |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:16 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Counter step (due to decimation)                             | 15:0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x50**           | **Reset error counters**                                     |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:1  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reset error counters                                         |    0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x54**           | **Error counter CHA**                                        |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Number of errors                                             | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x58**           | **Error counter CHB**                                        |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Number of errors                                             | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+


Digital Loopback and Bitshift
------------------------------

.. tabularcolumns:: |p{15mm}|p{105mm}|p{15mm}|p{15mm}|

+--------------------+--------------------------------------------------------------+-------+-----+
| Offset             | Description                                                  | Bits  | R/W |
+====================+==============================================================+=======+=====+
| **0x5C**           | **Digital loopback**                                         |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:8  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | DAC CH2                                                      |  7:5  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Loopback DAC CH2 - output raw data                           |    4  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | DAC CH1                                                      |  3:1  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Loopback DAC CH1 - output raw data                           |    0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x60**           | **Bitshift right CHA**                                       |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Shift raw data from RAM right                                | 31:5  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Shift in number of bits                                      |  4:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x64**           | **Bitshift right CHB**                                       |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Shift raw data from RAM right                                | 31:5  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Shift in number of bits                                      |  4:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+

|

:ref:`Back to top <fpga_stream_app_dev>`

|

===========================================================
CS[2] - GPIO Streaming (0x40200000-0x402FFFFF)
===========================================================

The GPIO Streaming module provides bidirectional GPIO data streaming with RLE encoding support, triggering, and DMA control.


Quick Reference
---------------

.. tabularcolumns:: |p{20mm}|p{95mm}|p{15mm}|

+------------------+----------------------------------------------------------+-------+
| Offset           | Register                                                 | R/W   |
+==================+==========================================================+=======+
| 0x0-0x4          | GPIO status and acquire mode                             | R/W   |
+------------------+----------------------------------------------------------+-------+
| 0x10-0x4C        | Trigger Control and Status                               | R/W   |
+------------------+----------------------------------------------------------+-------+
| 0x50-0x60        | Decimation, RLE, counters, polarity                      | R/W   |
+------------------+----------------------------------------------------------+-------+
| 0x70-0x74        | GPIO direction control (P/N)                             | R/W   |
+------------------+----------------------------------------------------------+-------+
| 0x80-0x88        | Event control (select, mask, status)                     | R/W   |
+------------------+----------------------------------------------------------+-------+
| 0x8C-0xB4        | DMA configuration (status, buffers, missed counters)     | R/W   |
+------------------+----------------------------------------------------------+-------+
| 0xB8-0xC0        | GPIO output control (pointers, step)                     | R/W   |
+------------------+----------------------------------------------------------+-------+

|

RLE Output Encoding
-------------------

**RLE output encoding:** 

The written number of samples equals *(desired number - 1)*, max 0xFF (8 bits available).
Not less than 1 - limited to one change per 2 clock cycles.
A 32-bit chunk of data is structured like this:

    * [ 7: 0] RLE decode number for all bits
    * [15: 0] Reserved
    * [23:16] GPIO_x_N bits
    * [31:24] GPIO_x_P bits

|

Status and Configuration
------------------------

.. tabularcolumns:: |p{15mm}|p{105mm}|p{15mm}|p{15mm}|

+--------------------+--------------------------------------------------------------+-------+-----+
| Offset             | Description                                                  | Bits  | R/W |
+====================+==============================================================+=======+=====+
| **0x0**            | **GPIO Status reg**                                          |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:4  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Acquire stopped                                              |    3  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Acquire start                                                |    2  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Trigger received                                             |    1  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     |    0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x4**            | **Acquire mode**                                             |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:2  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Automatic mode                                               |    1  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Continuous mode                                              |    0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+


Trigger Control and Status
---------------------------

.. tabularcolumns:: |p{15mm}|p{105mm}|p{15mm}|p{15mm}|

+--------------------+--------------------------------------------------------------+-------+-----+
| Offset             | Description                                                  | Bits  | R/W |
+====================+==============================================================+=======+=====+
| **0x10**           | **Number of pre-trigger samples**                            |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Number of samples                                            | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x14**           | **Number of post-trigger samples**                           |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Number of samples                                            | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x18**           | **Current pre-trigger samples**                              |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Number of samples                                            | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x1C**           | **Current post-trigger samples**                             |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Number of samples                                            | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x20**           | **Timestamp of acquire - low bits**                          |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Timestamp[31:0]                                              | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x24**           | **Timestamp of acquire - high bits**                         |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Timestamp[63:32]                                             | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x28**           | **Timestamp of trigger - low bits**                          |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Timestamp[31:0]                                              | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x2C**           | **Timestamp of trigger - high bits**                         |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Timestamp[63:32]                                             | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x30**           | **Timestamp of stop - low bits**                             |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Timestamp[31:0]                                              | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x34**           | **Timestamp of stop - high bits**                            |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Timestamp[63:32]                                             | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x40**           | **Trigger - comparator mask**                                |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:8  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Comparator mask                                              |  7:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x44**           | **Trigger - comparator value**                               |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:8  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Comparator value                                             |  7:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x48**           | **Trigger - positive edge**                                  |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:8  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Positive edge                                                |  7:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x4C**           | **Trigger - negative edge**                                  |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:8  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Negative edge                                                |  7:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+


Data Processing Control
-----------------------

.. tabularcolumns:: |p{15mm}|p{105mm}|p{15mm}|p{15mm}|

+--------------------+--------------------------------------------------------------+-------+-----+
| Offset             | Description                                                  | Bits  | R/W |
+====================+==============================================================+=======+=====+
| **0x50**           | **Decimation factor**                                        |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Decimation factor                                            | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x54**           | **RLE enable**                                               |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:1  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | RLE enable                                                   |    0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x58**           | **Current counter**                                          |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Counter                                                      | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x5C**           | **Last packet**                                              |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Counter                                                      | 31:0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x60**           | **Input polarity**                                           |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:8  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Input polarity                                               |  7:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+


GPIO Configuration
------------------

.. tabularcolumns:: |p{15mm}|p{105mm}|p{15mm}|p{15mm}|

+--------------------+--------------------------------------------------------------+-------+-----+
| Offset             | Description                                                  | Bits  | R/W |
+====================+==============================================================+=======+=====+
| **0x70**           | **GPIO direction - P**                                       |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:8  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | GPIO direction                                               |  7:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x74**           | **GPIO direction - N**                                       |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:8  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | GPIO direction                                               |  7:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xB8**           | **GPIO IN - write pointer**                                  |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Write pointer                                                | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xBC**           | **GPIO OUT - read pointer**                                  |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Read pointer                                                 | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xC0**           | **GPIO OUT - step of read pointer**                          |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Step                                                         | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+


Event Control
--------------

.. tabularcolumns:: |p{15mm}|p{105mm}|p{15mm}|p{15mm}|

+--------------------+--------------------------------------------------------------+-------+-----+
| Offset             | Description                                                  | Bits  | R/W |
+====================+==============================================================+=======+=====+
| **0x80**           | **Event select register**                                    |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:5  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Logic analyzer event                                         |    4  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Scope CHB event                                              |    3  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Scope CHA event                                              |    2  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Signal generator CHB event                                   |    1  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Signal generator CHA event                                   |    0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x84**           | **Trigger mask**                                             |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:6  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | External trigger                                             |    5  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Logic analyzer trigger                                       |    4  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Scope CH B trigger                                           |    3  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Scope CH A trigger                                           |    2  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Signal generator CH B trigger                                |    1  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Signal generator CH A trigger                                |    0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x88**           | **Event status register**                                    |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:5  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Logic analyzer event                                         |    4  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Scope CH B event                                             |    3  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Scope CH A event                                             |    2  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Signal generator CH B event                                  |    1  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Signal generator CH A event                                  |    0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+




DMA Configuration
-----------------

.. tabularcolumns:: |p{15mm}|p{105mm}|p{15mm}|p{15mm}|

+--------------------+--------------------------------------------------------------+-------+-----+
| Offset             | Description                                                  | Bits  | R/W |
+====================+==============================================================+=======+=====+
| **0x8C**           | **DMA control register - IN**                                |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:10 | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Streaming DMA mode                                           |    9  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Normal DMA mode                                              |    8  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     |  7:5  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reset buffers and flags                                      |    4  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 2 acknowledge                                         |    3  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 1 acknowledge                                         |    2  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Interrupt acknowledge                                        |    1  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Start DMA                                                    |    0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x90**           | **DMA control register - OUT**                               |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:8  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 2 ready  OUT                                          |    7  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 1 ready  OUT                                          |    6  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Streaming DMA mode OUT                                       |    5  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Normal DMA mode OUT                                          |    4  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     |  3:2  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reset buffers and flags OUT                                  |    1  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Start DMA OUT                                                |    0  |   W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x94**           | **DMA status register IN**                                   |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:4  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 2 overflow                                            |    3  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 1 overflow                                            |    2  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 2 full                                                |    1  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Buffer 1 full                                                |    0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x98**           | **DMA status register OUT**                                  |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reserved                                                     | 31:5  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Reset state                                                  |    4  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Read state buffer 2                                          |    3  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | End state buffer 2                                           |    2  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Read state buffer 1                                          |    1  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | End state buffer 1                                           |    0  | R   |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0x9C**           | **DMA buffer size**                                          |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | DMA buffer size                                              | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xA0**           | **DMA buffer 1 address IN**                                  |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | DMA buffer address                                           | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xA4**           | **DMA buffer 1 address OUT**                                 |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | DMA buffer address                                           | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xA8**           | **DMA buffer 2 address IN**                                  |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | DMA buffer address                                           | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xAC**           | **DMA buffer 2 address OUT**                                 |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | DMA buffer address                                           | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xB0**           | **Buffer 1 missed sample counter IN**                        |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Number of missed samples                                     | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+
| **0xB4**           | **Buffer 2 missed sample counter IN**                        |       |     |
+--------------------+--------------------------------------------------------------+-------+-----+
|                    | Number of missed samples                                     | 31:0  | R/W |
+--------------------+--------------------------------------------------------------+-------+-----+

|

:ref:`Back to top <fpga_stream_app_dev>`

|
